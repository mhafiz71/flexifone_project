{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Profile - FlexiFone{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full mb-4">
                <i class="fas fa-user-edit text-white text-2xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Edit Profile</h1>
            <p class="text-lg text-gray-600">Update your personal information and preferences</p>
        </div>

        <!-- Profile Completion Progress -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="text-lg font-semibold text-gray-900">Profile Completion</h3>
                    <p class="text-gray-600">{{ profile_completion }}% complete</p>
                </div>
                <div class="w-32 bg-gray-200 rounded-full h-2">
                    <div class="bg-green-500 h-2 rounded-full" style="width: {{ profile_completion }}%"></div>
                </div>
            </div>
        </div>

        <form method="post" class="space-y-8">
            {% csrf_token %}
            
            <!-- Personal Information Section -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                <div class="border-l-4 border-green-500 pl-6 mb-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-2 flex items-center">
                        <span class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-sm font-bold mr-3">1</span>
                        Personal Information
                    </h3>
                    <p class="text-gray-600">Basic information about yourself</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- First Name -->
                    <div>
                        <label for="{{ profile_form.first_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.first_name.label }}
                        </label>
                        {{ profile_form.first_name }}
                        {% if profile_form.first_name.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.first_name.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Last Name -->
                    <div>
                        <label for="{{ profile_form.last_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.last_name.label }}
                        </label>
                        {{ profile_form.last_name }}
                        {% if profile_form.last_name.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.last_name.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="{{ profile_form.email.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.email.label }}
                        </label>
                        {{ profile_form.email }}
                        {% if profile_form.email.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.email.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Phone Number -->
                    <div>
                        <label for="{{ profile_form.phone_number.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.phone_number.label }}
                        </label>
                        {{ profile_form.phone_number }}
                        {% if profile_form.phone_number.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.phone_number.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Alternate Phone -->
                    <div>
                        <label for="{{ profile_form.alternate_phone.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.alternate_phone.label }}
                        </label>
                        {{ profile_form.alternate_phone }}
                        {% if profile_form.alternate_phone.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.alternate_phone.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Date of Birth -->
                    <div>
                        <label for="{{ profile_form.date_of_birth.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.date_of_birth.label }}
                        </label>
                        {{ profile_form.date_of_birth }}
                        {% if profile_form.date_of_birth.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.date_of_birth.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Gender -->
                    <div>
                        <label for="{{ profile_form.gender.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.gender.label }}
                        </label>
                        {{ profile_form.gender }}
                        {% if profile_form.gender.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.gender.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Occupation -->
                    <div>
                        <label for="{{ profile_form.occupation.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.occupation.label }}
                        </label>
                        {{ profile_form.occupation }}
                        {% if profile_form.occupation.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.occupation.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Employer -->
                    <div>
                        <label for="{{ profile_form.employer.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.employer.label }}
                        </label>
                        {{ profile_form.employer }}
                        {% if profile_form.employer.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.employer.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Monthly Income -->
                    <div>
                        <label for="{{ profile_form.monthly_income.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ profile_form.monthly_income.label }}
                        </label>
                        {{ profile_form.monthly_income }}
                        {% if profile_form.monthly_income.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ profile_form.monthly_income.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Address Information Section -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                <div class="border-l-4 border-blue-500 pl-6 mb-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-2 flex items-center">
                        <span class="w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold mr-3">2</span>
                        Address Information
                    </h3>
                    <p class="text-gray-600">Your residential address details</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Address Line 1 -->
                    <div class="md:col-span-2">
                        <label for="{{ address_form.address_line_1.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ address_form.address_line_1.label }}
                        </label>
                        {{ address_form.address_line_1 }}
                        {% if address_form.address_line_1.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ address_form.address_line_1.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Address Line 2 -->
                    <div class="md:col-span-2">
                        <label for="{{ address_form.address_line_2.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ address_form.address_line_2.label }}
                        </label>
                        {{ address_form.address_line_2 }}
                        {% if address_form.address_line_2.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ address_form.address_line_2.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- City -->
                    <div>
                        <label for="{{ address_form.city.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ address_form.city.label }}
                        </label>
                        {{ address_form.city }}
                        {% if address_form.city.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ address_form.city.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Region -->
                    <div>
                        <label for="{{ address_form.region.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ address_form.region.label }}
                        </label>
                        {{ address_form.region }}
                        {% if address_form.region.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ address_form.region.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Postal Code -->
                    <div>
                        <label for="{{ address_form.postal_code.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ address_form.postal_code.label }}
                        </label>
                        {{ address_form.postal_code }}
                        {% if address_form.postal_code.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ address_form.postal_code.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Notification Preferences Section -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                <div class="border-l-4 border-purple-500 pl-6 mb-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-2 flex items-center">
                        <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-sm font-bold mr-3">3</span>
                        Notification Preferences
                    </h3>
                    <p class="text-gray-600">Choose how you want to receive notifications</p>
                </div>
                
                <div class="space-y-4">
                    <!-- Email Notifications -->
                    <div class="flex items-center">
                        {{ preferences_form.email_notifications }}
                        <label for="{{ preferences_form.email_notifications.id_for_label }}" class="ml-3 text-sm font-medium text-gray-700">
                            {{ preferences_form.email_notifications.label }}
                            <span class="text-gray-500 block text-xs">Receive important account updates via email</span>
                        </label>
                    </div>

                    <!-- SMS Notifications -->
                    <div class="flex items-center">
                        {{ preferences_form.sms_notifications }}
                        <label for="{{ preferences_form.sms_notifications.id_for_label }}" class="ml-3 text-sm font-medium text-gray-700">
                            {{ preferences_form.sms_notifications.label }}
                            <span class="text-gray-500 block text-xs">Receive payment reminders and updates via SMS</span>
                        </label>
                    </div>

                    <!-- Marketing Emails -->
                    <div class="flex items-center">
                        {{ preferences_form.marketing_emails }}
                        <label for="{{ preferences_form.marketing_emails.id_for_label }}" class="ml-3 text-sm font-medium text-gray-700">
                            {{ preferences_form.marketing_emails.label }}
                            <span class="text-gray-500 block text-xs">Receive promotional offers and product updates</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-end">
                <a href="{% url 'accounts:profile' %}" class="w-full sm:w-auto px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors text-center">
                    Cancel
                </a>
                <button type="submit" class="w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-lg">
                    <i class="fas fa-save mr-2"></i>Save Changes
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
